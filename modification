private void ImportTablesWithFKReadiness(IEnumerable<string> tables)
{
Â  Â  var skipped = new List<string>();
Â  Â  var pass = 1;

Â  Â  foreach (var table in tables)
Â  Â  {
Â  Â  Â  Â  if (_importedTables.Contains(table)) continue;

Â  Â  Â  Â  var fks = GetForeignKeyInfo(table);
Â  Â  Â  Â  bool ready = fks.All(fk => _idMappings.ContainsKey(fk.ReferencedTableName));

Â  Â  Â  Â  if (!ready)
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Console.WriteLine($"[ATTENTE] (pass {pass}) {table} : FK non rÃ©solues. Mise en attente.");
Â  Â  Â  Â  Â  Â  skipped.Add(table);
Â  Â  Â  Â  Â  Â  continue;
Â  Â  Â  Â  }

Â  Â  Â  Â  Console.WriteLine($"[IMPORT] (pass {pass}) {table}");
Â  Â  Â  Â  ImportTable(table);
Â  Â  Â  Â  _importedTables.Add(table);
Â  Â  }

Â  Â  // Relancer la passe si des tables Ã©taient en attente
Â  Â  if (skipped.Count > 0)
Â  Â  {
Â  Â  Â  Â  if (pass > 5)
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Console.WriteLine("âš ï¸ Trop de passes sans progrÃ¨s. Tables restantes non rÃ©solues :");
Â  Â  Â  Â  Â  Â  foreach (var t in skipped)
Â  Â  Â  Â  Â  Â  Â  Â  Console.WriteLine($" - {t}");
Â  Â  Â  Â  Â  Â  throw new Exception("Import bloquÃ© : certaines dÃ©pendances FK n'ont pas pu Ãªtre satisfaites.");
Â  Â  Â  Â  }

Â  Â  Â  Â  pass++;
Â  Â  Â  Â  Console.WriteLine($"ðŸ” Nouvelle passe pour {skipped.Count} table(s) ignorÃ©e(s).");
Â  Â  Â  Â  ImportTablesWithFKReadiness(skipped); // rÃ©cursion contrÃ´lÃ©e
Â  Â  }
}



var nonRelationTables = importOrder
Â  Â  .Where(t => !_pureRelations.Contains(t) && !_extendedRelations.Contains(t));

ImportTablesWithFKReadiness(nonRelationTables);